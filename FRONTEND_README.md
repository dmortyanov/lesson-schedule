# Фронтенд для ИС «Расписание занятий»

## Описание

Полнофункциональный веб-интерфейс для системы расписания занятий, разработанный согласно техническому заданию.

## Особенности

- ✅ Русскоязычный интерфейс
- ✅ Адаптивный дизайн (responsive)
- ✅ Цветовая схема согласно ТЗ:
  - Светлый фон
  - Темный текст
  - Синие акценты
  - Оранжевый/красный для предупреждений
- ✅ Система аутентификации (JWT)
- ✅ Разграничение прав доступа по ролям:
  - **Администратор БД**: полный доступ
  - **Преподаватель**: просмотр всего, редактирование своих занятий
  - **Студент**: только просмотр

## Структура файлов

```
static/
├── css/
│   └── main.css          # Основные стили
└── js/
    ├── api.js            # API клиент
    ├── auth.js           # Управление аутентификацией
    ├── utils.js          # Утилиты (даты, форматирование)
    ├── modals.js         # Модальные окна для CRUD
    └── dashboard.js      # Главная логика дашборда

templates/
├── login.html            # Страница входа
├── dashboard.html        # Главная страница приложения
└── base.html            # Базовый шаблон (legacy)
```

## Функционал

### 1. Аутентификация
- Страница входа (`/`)
- Автоматическое определение роли пользователя
- Хранение JWT токенов в localStorage
- Автоматическое обновление токенов

### 2. Расписание
- Просмотр расписания по группе
- Просмотр расписания по преподавателю
- Просмотр расписания по аудитории
- Просмотр всех занятий (для администратора)
- Фильтрация по неделе
- Создание и редактирование занятий (для администратора и преподавателя)

### 3. Поиск
- Поиск занятий по группе
- Поиск занятий по преподавателю
- Поиск занятий по аудитории
- Поиск занятий по дисциплине
- Фильтрация по неделе

### 4. Управление данными (только для администратора)
- Управление кафедрами
- Управление группами
- Управление преподавателями
- Управление студентами
- Управление дисциплинами
- Управление аудиториями
- Управление занятиями

### 5. Поиск свободных аудиторий
- Поиск по времени (начало и окончание)
- Фильтрация по типу аудитории (лекционная/лабораторная)
- Фильтрация по минимальной вместимости

## Использование

### Запуск

1. Убедитесь, что бэкенд запущен:
   ```bash
   python manage.py runserver
   ```

2. Откройте браузер и перейдите на:
   ```
   http://localhost:8000/
   ```

3. Войдите используя учетные данные пользователя

### Создание пользователей

Пользователи создаются через Django admin (`/admin/`) или через команду:
```bash
python manage.py createsuperuser
```

Для назначения ролей:
1. Перейдите в Django admin
2. Откройте "Groups"
3. Добавьте пользователя в соответствующую группу:
   - `ADMIN_DB` - Администратор БД
   - `TEACHER` - Преподаватель
   - `STUDENT` - Студент

### Настройка ролей для пользователей

Для создания преподавателя:
1. Создайте пользователя в Django admin
2. Добавьте пользователя в группу `TEACHER`
3. Создайте запись в таблице "Teachers" и свяжите с пользователем

Для создания студента:
1. Создайте пользователя в Django admin
2. Добавьте пользователя в группу `STUDENT`
3. Создайте запись в таблице "Students" и свяжите с пользователем

## API Endpoints

Фронтенд использует следующие API endpoints:

- `POST /api/auth/token/` - Получение JWT токена
- `POST /api/auth/refresh/` - Обновление токена
- `GET /api/auth/me/` - Информация о текущем пользователе
- `GET /api/departments/` - Список кафедр
- `GET /api/groups/` - Список групп
- `GET /api/teachers/` - Список преподавателей
- `GET /api/students/` - Список студентов
- `GET /api/disciplines/` - Список дисциплин
- `GET /api/rooms/` - Список аудиторий
- `GET /api/rooms/free/` - Поиск свободных аудиторий
- `GET /api/lessons/` - Список занятий
- `GET /api/lessons/by_group/` - Занятия по группе
- `GET /api/lessons/by_teacher/` - Занятия по преподавателю
- `GET /api/lessons/by_room/` - Занятия по аудитории

## Технические детали

### Технологии
- Vanilla JavaScript (без фреймворков)
- CSS3 с CSS переменными
- HTML5
- Django Templates

### Браузерная совместимость
- Chrome/Edge (последние версии)
- Firefox (последние версии)
- Safari (последние версии)

### Адаптивность
Интерфейс адаптируется под различные размеры экранов:
- Десктоп (> 768px)
- Планшет (768px - 1024px)
- Мобильный (< 768px)

## Разграничение прав доступа

| Функция | Администратор БД | Преподаватель | Студент |
|---------|------------------|---------------|---------|
| Просмотр расписания | ✅ | ✅ | ✅ |
| Поиск занятий | ✅ | ✅ | ✅ |
| Создание занятий | ✅ | ❌ | ❌ |
| Редактирование всех занятий | ✅ | ❌ | ❌ |
| Редактирование своих занятий | ✅ | ✅ | ❌ |
| Удаление занятий | ✅ | ❌ | ❌ |
| Управление кафедрами/группами/и т.д. | ✅ | ❌ | ❌ |
| Поиск свободных аудиторий | ✅ | ✅ | ✅ |

## Дополнительные возможности

### Горячие клавиши
В будущих версиях могут быть добавлены горячие клавиши для быстрого доступа к функциям.

### Уведомления
Система показывает уведомления об успешных операциях и ошибках:
- Зеленые - успех
- Красные - ошибки
- Оранжевые - предупреждения
- Синие - информация

## Известные ограничения

1. Роль пользователя определяется через API endpoint `/api/auth/me/`, который должен быть реализован на бэкенде
2. Для полной функциональности требуется наличие данных в базе (кафедры, группы, преподаватели и т.д.)
3. Валидация данных выполняется как на клиенте, так и на сервере

## Разработка

Для разработки фронтенда:

1. Внесите изменения в файлы в `static/` и `templates/`
2. Обновите страницу в браузере (Django автоматически подхватывает изменения)
3. Используйте консоль браузера для отладки JavaScript

## Поддержка

При возникновении проблем:
1. Проверьте консоль браузера (F12)
2. Убедитесь, что бэкенд запущен и доступен
3. Проверьте, что пользователь имеет правильные права доступа

